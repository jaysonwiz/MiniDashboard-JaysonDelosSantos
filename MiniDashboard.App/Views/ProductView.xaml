<UserControl x:Class="MiniDashboard.App.Views.ProductView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:MiniDashboard.App.Views" 
              mc:Ignorable="d" Background="Transparent"   d:DesignHeight="450" d:DesignWidth="800"
             AutomationProperties.AutomationId="ProductViewRoot"

            HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
    <Grid Background="White">
        <TextBlock HorizontalAlignment="Left" Height="31" Margin="10,14,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="780" FontFamily="Segoe UI Semilight" FontSize="20" Padding="10,0,0,0" Text="Product Master Data"/>
        <TextBox HorizontalAlignment="Left" Margin="22,60,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="386" Style="{StaticResource SearchBarStyle}" 
            Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}">
            <TextBox.InputBindings>
                <KeyBinding Key="Enter" Command="{Binding SearchProductCommand}" />
            </TextBox.InputBindings>
        </TextBox>
        <DataGrid x:Name="ProductDataGrid"
   ItemsSource="{Binding Products}"
   SelectedItem="{Binding SelectedProduct}"
   SelectionMode="Single"
   AutoGenerateColumns="False"
   RowHeight="35"
   GridLinesVisibility="None"
   RowBackground="White"
   AlternatingRowBackground="#FAFAFA"
   BorderThickness="1"
   BorderBrush="LightGray"
   Background="White"
   HeadersVisibility="Column"
   IsReadOnly="True" FocusVisualStyle="{x:Null}" SelectionUnit="FullRow"
   Margin="10,115,10,10"
            CellStyle="{StaticResource GlassyDataGridCellStyle}"
   RowStyle="{StaticResource GlassyDataGridRowStyle}"
   ColumnHeaderStyle="{StaticResource GlassyColumnHeaderStyle}">

            <DataGrid.Columns>
                <DataGridTextColumn Header="  Product ID" Binding="{Binding ProductID}" Visibility="Hidden" Width="100"/>
                <DataGridTextColumn Header="  Product Name" Binding="{Binding ProductName}" Width="*"/>

                <!-- Action Column -->
                <DataGridTemplateColumn Header="Actions" Width="80">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" >
                                <!-- Edit Button -->
                                <Button Width="28" Height="28" ToolTip="Edit"
                 Background="Transparent"
                 BorderThickness="0"
                 Padding="0"
                AutomationProperties.AutomationId="EditProductButton"
                 Command="{Binding DataContext.EditProductCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}"
                 CommandParameter="{Binding SelectedTenant}">
                                    <Image Source="pack://application:,,,/MiniDashboard.App;component/Assets/Images/Icons/edit.png" Width="16" Height="16"/>
                                </Button>

                                <!-- Delete Button -->
                                <Button Width="28" Height="28" ToolTip="Delete"
                 Background="Transparent"
                 BorderThickness="0"
                 Padding="0"
                 Command="{Binding DataContext.DeleteProductCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}"
                 CommandParameter="{Binding SelectedTenant}">
                                    <Image Source="pack://application:,,,/MiniDashboard.App;component/Assets/Images/Icons/delete.png" Width="16" Height="16" />
                                </Button>
                            </StackPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

            </DataGrid.Columns>
        </DataGrid>
        <Button x:Name="btnAdd" Margin="0,55,10,0" VerticalAlignment="Top" Style="{StaticResource AddButtonStyle}" 
                Height="38" Width="91" HorizontalAlignment="Right" Command="{Binding AddProductCommand}" 
                AutomationProperties.AutomationId="AddProductButton" />
       
        <!-- Overlay loading indicator -->
        <Grid Visibility="{Binding IsLoading, Converter={StaticResource BoolToVisibilityConverter}}"
          Background="#80000000">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <ProgressBar IsIndeterminate="True" Width="200" Height="20"/>
                <TextBlock Text="Loading..." Foreground="White" HorizontalAlignment="Center"/>
            </StackPanel>
        </Grid>


    </Grid>
</UserControl>
